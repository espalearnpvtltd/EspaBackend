{
  "info": {
    "name": "EspaBackend - Complete API Collection",
    "description": "Full API testing collection for course management, authentication, enrollment, and payments",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "üîê Authentication",
      "item": [
        {
          "name": "Register Student (Nursery)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Nursery Student\",\n  \"email\": \"nursery{{$timestamp}}@example.com\",\n  \"password\": \"SecurePass123\",\n  \"class\": \"Nursery\"\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Register Student (Class 5)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Class 5 Student\",\n  \"email\": \"class5{{$timestamp}}@example.com\",\n  \"password\": \"SecurePass123\",\n  \"class\": \"5\"\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Register Student (Class 12)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Class 12 Student\",\n  \"email\": \"class12{{$timestamp}}@example.com\",\n  \"password\": \"SecurePass123\",\n  \"class\": \"12\"\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"SecurePass123\"\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "üìö Courses",
      "item": [
        {
          "name": "Get All Courses (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/courses",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "courses"]
            }
          }
        },
        {
          "name": "Search Courses - Physics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/courses/search/courses?query=physics",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "courses", "search", "courses"],
              "query": [{"key": "query", "value": "physics"}]
            }
          }
        },
        {
          "name": "Search Courses - Class 5",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5001/api/courses/search/courses?query=class%205",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "courses", "search", "courses"],
              "query": [{"key": "query", "value": "class 5"}]
            }
          }
        },
        {
          "name": "Get Recommended Courses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/courses/recommended/by-class",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "courses", "recommended", "by-class"]
            }
          }
        },
        {
          "name": "Search in Recommended",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/courses/recommended/by-class?search=mathematics",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "courses", "recommended", "by-class"],
              "query": [{"key": "search", "value": "mathematics"}]
            }
          }
        },
        {
          "name": "Create Course (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-secret-key",
                "value": "espa_admin_secret_key_2025_secure"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Advanced Mathematics\",\n  \"description\": \"Complete mathematics course for Class 5\",\n  \"subject\": \"Mathematics\",\n  \"class\": \"5\",\n  \"difficulty\": \"intermediate\",\n  \"price\": 2999,\n  \"discountedPrice\": 1999,\n  \"duration\": 60,\n  \"isRecommended\": true\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/courses",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "courses"]
            }
          }
        }
      ]
    },
    {
      "name": "üí≥ Payments & Enrollment",
      "item": [
        {
          "name": "Step 1: Create Payment Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"courseId\": \"693ab05e31318b0db26d7147\"\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/payments/order",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "payments", "order"]
            }
          }
        },
        {
          "name": "Step 2: Verify Payment & Enroll",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": \"ORD_1765524953945_f985b83a\",\n  \"transactionId\": \"TXN_1765524960123\",\n  \"paymentMethod\": \"upi\"\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/payments/verify",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "payments", "verify"]
            }
          }
        },
        {
          "name": "Get Payment History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/payments/history",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "payments", "history"]
            }
          }
        },
        {
          "name": "Refund Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/payments/ORD_ID_HERE/refund",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "payments", "ORD_ID_HERE", "refund"]
            }
          }
        }
      ]
    },
    {
      "name": "üéì Enrollments",
      "item": [
        {
          "name": "Get All Enrollments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/enrollments",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments"]
            }
          }
        },
        {
          "name": "Get Enrollment Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/enrollments/ENROLLMENT_ID_HERE",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments", "ENROLLMENT_ID_HERE"]
            }
          }
        },
        {
          "name": "Update Progress (25%)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"progress\": 25\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/enrollments/ENROLLMENT_ID_HERE/progress",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments", "ENROLLMENT_ID_HERE", "progress"]
            }
          }
        },
        {
          "name": "Update Progress (100% Complete)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"progress\": 100\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/enrollments/ENROLLMENT_ID_HERE/progress",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments", "ENROLLMENT_ID_HERE", "progress"]
            }
          }
        },
        {
          "name": "Rate Course",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"feedback\": \"Excellent course!\"\n}"
            },
            "url": {
              "raw": "http://localhost:5001/api/enrollments/ENROLLMENT_ID_HERE/rate",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments", "ENROLLMENT_ID_HERE", "rate"]
            }
          }
        },
        {
          "name": "Pause Course",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/enrollments/ENROLLMENT_ID_HERE/pause",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments", "ENROLLMENT_ID_HERE", "pause"]
            }
          }
        },
        {
          "name": "Resume Course",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/enrollments/ENROLLMENT_ID_HERE/resume",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments", "ENROLLMENT_ID_HERE", "resume"]
            }
          }
        },
        {
          "name": "Cancel Enrollment",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer YOUR_TOKEN_HERE"
              }
            ],
            "url": {
              "raw": "http://localhost:5001/api/enrollments/ENROLLMENT_ID_HERE/cancel",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5001",
              "path": ["api", "enrollments", "ENROLLMENT_ID_HERE", "cancel"]
            }
          }
        }
      ]
    }
  ]
}
